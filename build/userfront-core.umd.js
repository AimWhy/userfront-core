!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){function e(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}var t=require("axios"),n=require("js-cookie"),o=require("./constants"),r=o.apiUrl,i=o.privateIPRegex,s=function(e){try{var t=e||window.location.hostname;return!(!t.match(/localhost/g)&&!t.match(i))}catch(e){return!0}},a={mode:s()?"test":"live"};function c(e,t,o){var r=o+"."+a.tenantId;t=t||{secure:"live"===a.mode,sameSite:"Lax"},"refresh"===o&&(t.sameSite="Strict"),n.set(r,e,t)}function u(e){n.remove(e),n.remove(e,{secure:!0,sameSite:"Lax"}),n.remove(e,{secure:!0,sameSite:"None"}),n.remove(e,{secure:!1,sameSite:"Lax"}),n.remove(e,{secure:!1,sameSite:"None"})}module.exports={getMode:function(){try{var n=e(function(){return Promise.resolve(t.get(r+"tenants/"+a.tenantId+"/mode")).then(function(e){a.mode=e.data.mode||"test"})},function(){a.mode="test"});return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},init:function(e,t){if(void 0===t&&(t={}),!e)return console.warn("Userfront initialized without tenant ID");a.tenantId=e,a.signupModId=t.signup,a.loginModId=t.login,a.logoutModId=t.logout,a.resetModId=t.reset,a.accessTokenName="access."+e,a.idTokenName="id."+e,a.refreshTokenName="refresh."+e},isTestHostname:s,logout:function(){try{var o=n.get(a.accessTokenName);if(!o)return Promise.resolve();var i=e(function(){return Promise.resolve(t.get(r+"/auth/logout",{headers:{authorization:"Bearer "+o}})).then(function(e){var t=e.data;u(a.accessTokenName),u(a.idTokenName),u(a.refreshTokenName),window.location.href=t.redirectTo})},function(){});return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},scope:a,setCookie:c,signup:function(e){var n=e.username,o=e.name,i=e.email,s=e.password;try{return Promise.resolve(t.post(r+"auth/create",{tenantId:a.tenantId,username:n,name:o,email:i,password:s})).then(function(e){var t=e.data;if(!t.tokens)throw new Error("Please try again.");c(t.tokens.access.value,t.tokens.access.cookieOptions,"access"),c(t.tokens.id.value,t.tokens.id.cookieOptions,"id"),c(t.tokens.refresh.value,t.tokens.refresh.cookieOptions,"refresh"),window.location.href=t.redirectTo})}catch(e){return Promise.reject(e)}}}});
//# sourceMappingURL=userfront-core.umd.js.map
